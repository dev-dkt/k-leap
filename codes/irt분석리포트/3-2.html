<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한국어능력시험 문항 정보 함수 상세 분석 보고서</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="report-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>한국어능력시험 문항 정보 함수 상세 분석 보고서</h1>

        <div class="section">
            <h2>1. 연구 개요</h2>
            <h3>1.1 연구 목적</h3>
            <p>본 연구의 목적은 항목반응이론(IRT)을 적용하여 한국어능력시험 문항의 정보 함수를 분석하고, 이를 통해 시험의 정확성과 효율성을 향상시키는 것입니다.</p>

            <h3>1.2 연구 방법</h3>
            <p>2모수 로지스틱 모형(2PL)을 사용하여 문항 정보 함수를 계산하고, R 소프트웨어의 mirt 패키지를 활용하여 분석을 수행했습니다.</p>

            <h3>1.3 데이터 설명</h3>
            <ul>
                <li>분석 대상: 필기시험 50문항, 구술시험 5문항</li>
                <li>응시자 수: 30명</li>
                <li>수집 정보: 문항 응답 데이터, IRT 모수 (변별도, 난이도)</li>
            </ul>
        </div>

        <div class="section">
            <h2>2. 문항 정보 함수 이론 및 계산 방법</h2>
            <h3>2.1 IRT 모델에 기반한 정보 함수 수식</h3>
            <p>2PL 모델에서의 문항 정보 함수는 다음과 같이 정의됩니다:</p>
            <div class="equation">
                I(θ) = a²P(θ)(1-P(θ))
            </div>
            <p>여기서 a는 문항의 변별도, P(θ)는 능력 수준 θ에서의 정답 확률을 나타냅니다.</p>

            <h3>2.2 사용된 소프트웨어 및 패키지</h3>
            <ul>
                <li>R 버전 4.1.0</li>
                <li>mirt 패키지 (버전 1.34)</li>
                <li>ggplot2 패키지 (버전 3.3.5)</li>
            </ul>
        </div>

        <div class="section">
            <h2>3. 문항별 정보 함수 분석</h2>
            <h3>3.1 대표적 문항의 정보 함수 그래프</h3>
            <div class="chart-container">
                <canvas id="itemInfoFunction"></canvas>
            </div>

            <h3>3.2 최대 정보량과 IRT 파라미터와의 관계</h3>
            <div class="chart-container">
                <canvas id="infoParamRelation"></canvas>
            </div>
            <p>변별도가 높을수록 최대 정보량이 증가하는 경향을 보이며, 난이도는 최대 정보를 제공하는 능력 수준과 밀접한 관계가 있습니다.</p>
        </div>

        <div class="section">
            <h2>4. 전체 시험 정보 함수 분석</h2>
            <h3>4.1 시험의 총 정보 함수 그래프</h3>
            <div class="chart-container">
                <canvas id="testInfoFunction"></canvas>
            </div>
            <p>전체 시험은 능력 수준 -0.5에서 0.5 사이에서 가장 높은 정보를 제공하고 있습니다.</p>

            <h3>4.2 신뢰도와의 관계</h3>
            <p>정보 함수 I(θ)와 신뢰도 ρ²(θ)의 관계는 다음과 같습니다:</p>
            <div class="equation">
                ρ²(θ) = 1 - 1/I(θ)
            </div>
            <p>따라서 정보량이 높은 구간에서 시험의 신뢰도가 높아집니다.</p>
        </div>

        <div class="section">
            <h2>5. 능력 수준별 정보 제공 패턴 분석</h2>
            <h3>5.1 능력 구간별 평균 정보량</h3>
            <div class="chart-container">
                <canvas id="infoByAbilityLevel"></canvas>
            </div>

            <h3>5.2 시험의 중점 평가 능력 범위</h3>
            <p>분석 결과, 본 시험은 중하위 수준(-1.0 ~ 0.5)의 응시자를 평가하는 데 가장 효과적인 것으로 나타났습니다.</p>
        </div>

        <div class="section">
            <h2>6. 결론 및 제언</h2>
            <h3>6.1 주요 발견사항</h3>
            <ul id="findings">
                <li>필기시험 문항 중 약 20%가 높은 정보량(1.0 이상)을 제공하고 있습니다.</li>
                <li>구술시험 문항은 전반적으로 낮은 정보량을 보이고 있어 개선이 필요합니다.</li>
                <li>시험 전체적으로 중하위 능력 수준에 편중된 정보 제공 패턴을 보입니다.</li>
            </ul>

            <h3>6.2 시험 개선을 위한 제언</h3>
            <ul>
                <li>고난도 문항의 추가를 통해 상위 능력 수준에서의 정보량 증가가 필요합니다.</li>
                <li>구술시험 문항의 변별도 향상을 위한 재검토가 필요합니다.</li>
                <li>문항 유형별 정보 함수 특성을 고려한 균형 있는 문항 구성이 요구됩니다.</li>
            </ul>

            <h3>6.3 향후 연구 방향</h3>
            <ul>
                <li>다분문항반응이론(Polytomous IRT) 모델을 적용한 구술시험 문항 분석</li>
                <li>문항 정보 함수와 실제 응시자 수행 간의 관계 분석</li>
                <li>컴퓨터 적응 검사(CAT) 도입을 위한 문항 뱅크 구축 및 정보 함수 활용 방안 연구</li>
            </ul>
        </div>
    </div>

    <script type="module">
        import { df_questions, df_responses, s_responses, df_irt, s_irt, df_ability, s_ability } from './data.js';
    
        // theta 범위 정의 (-3에서 3까지 0.1 간격)
        const thetaRange = Array.from({ length: 61 }, (_, i) => -3 + i * 0.1);

        function calculateItemInfo(theta, alpha, beta) {
            const p = 1 / (1 + Math.exp(-alpha * (theta - beta)));
            return alpha * alpha * p * (1 - p);
        }
    
        function calculateTestInfo(theta) {
            return df_irt.reduce((sum, item) => sum + calculateItemInfo(theta, item['변별도 (alpha)'], item['난이도 (beta)']), 0);
        }
    
        function getMaxInfo(alpha, beta) {
            return (alpha * alpha) / 4;
        }
    
        document.addEventListener('DOMContentLoaded', () => {
            // 문항별 정보 함수 그래프
            const thetaRange = Array.from({length: 61}, (_, i) => -3 + i * 0.1);
            const itemInfoData = df_irt.slice(0, 5).map(item => ({
                label: `문항 ${item['문항 번호']}`,
                data: thetaRange.map(theta => calculateItemInfo(theta, item['변별도 (alpha)'], item['난이도 (beta)']))
            }));
    
            // 문항별 정보 함수 그래프
            new Chart(document.getElementById('itemInfoFunction'), {
                type: 'line',
                data: {
                    labels: thetaRange,
                    datasets: itemInfoData
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '대표 문항 정보 함수'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    return tooltipItem.raw.toFixed(3); // 소수점 3자리로 표시
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '능력 수준 (θ)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(3); // x축 소수점 3자리로 표시
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '정보량'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(3); // y축 소수점 3자리로 표시
                                }
                            }
                        }
                    }
                }
            });

            // 최대 정보량과 IRT 파라미터와의 관계
            const infoParamData = df_irt.map(item => ({
                x: item['변별도 (alpha)'], // 변별도
                y: getMaxInfo(item['변별도 (alpha)'], item['난이도 (beta)']), // 최대 정보량
                r: Math.abs(item['난이도 (beta)']) * 5 // 버블 크기 조절
            }));

            new Chart(document.getElementById('infoParamRelation'), {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: '문항',
                        data: infoParamData,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '변별도와 최대 정보량의 관계'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    return `변별도: ${tooltipItem.raw.x.toFixed(3)}, 최대 정보량: ${tooltipItem.raw.y.toFixed(3)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '변별도'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(3); // 소수점 3자리로 표시
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '최대 정보량'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(3); // 소수점 3자리로 표시
                                }
                            }
                        }
                    }
                }
            });


            // 전체 시험 정보 함수 계산
            function calculateTestInfo(theta) {
                return df_irt.reduce((sum, item) => sum + calculateItemInfo(theta, item['변별도 (alpha)'], item['난이도 (beta)']), 0);
            }

            // 문항 정보 함수 계산
            function calculateItemInfo(theta, alpha, beta) {
                const p = 1 / (1 + Math.exp(-alpha * (theta - beta)));
                return alpha * alpha * p * (1 - p);
            }


            // 전체 시험 정보 함수 데이터 생성
            const testInfoData = thetaRange.map(theta => calculateTestInfo(theta));

            // 전체 시험 정보 함수 차트 생성
            new Chart(document.getElementById('testInfoFunction'), {
                type: 'line',
                data: {
                    labels: thetaRange,
                    datasets: [{
                        label: '시험 정보 함수',
                        data: testInfoData,
                        borderColor: 'rgb(75, 192, 192)',
                        fill: false,
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '전체 시험 정보 함수'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    return `θ: ${tooltipItem.raw.x.toFixed(3)}, 정보량: ${tooltipItem.raw.y.toFixed(3)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '능력 수준 (θ)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(3); // 소수점 3자리로 표시
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '정보량'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(3); // 소수점 3자리로 표시
                                }
                            }
                        }
                    }
                }
            });


            // 능력 구간 정의 (-3 to -2, -2 to -1, ..., 2 to 3)
            const abilityBins = ['-3 to -2', '-2 to -1', '-1 to 0', '0 to 1', '1 to 2', '2 to 3'];

            // 능력 구간별 평균 정보량 계산
            const infoByAbility = abilityBins.map((bin, index) => {
                const start = -3 + index;
                const end = start + 1;
                const infoInRange = thetaRange.filter(theta => theta >= start && theta < end)
                                            .map(calculateTestInfo);
                return infoInRange.reduce((sum, info) => sum + info, 0) / infoInRange.length;
            });

            // 능력 구간별 평균 정보량 차트 생성
            new Chart(document.getElementById('infoByAbilityLevel'), {
                type: 'bar',
                data: {
                    labels: abilityBins,
                    datasets: [{
                        label: '평균 정보량',
                        data: infoByAbility,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '능력 구간별 평균 정보량'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    return `평균 정보량: ${tooltipItem.raw.toFixed(3)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '능력 구간'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '평균 정보량'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(3); // 소수점 3자리로 표시
                                }
                            }
                        }
                    }
                }
            });

            // 주요 발견사항 업데이트
            const highInfoItems = df_irt.filter(item => getMaxInfo(item['변별도 (alpha)'], item['난이도 (beta)']) > 1.0);
            const highInfoPercentage = (highInfoItems.length / df_irt.length * 100).toFixed(1);
    
            const findingsElement = document.querySelector('#findings');
            findingsElement.innerHTML = `
                <li>필기시험 문항 중 약 ${highInfoPercentage}%가 높은 정보량(1.0 이상)을 제공하고 있습니다.</li>
                <li>구술시험 문항은 전반적으로 낮은 정보량을 보이고 있어 개선이 필요합니다.</li>
                <li>시험 전체적으로 ${abilityBins[infoByAbility.indexOf(Math.max(...infoByAbility))]} 능력 수준에서 가장 높은 정보를 제공합니다.</li>
            `;
        });
    </script>
</body>
</html>